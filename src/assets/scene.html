<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
</head>

  <body style="margin : 0px; overflow: hidden;">
        <a-scene embedded arjs markers_start >
              <!-- <a-marker  preset="hiro">
                <a-image width="1"  height="1" position="-0.2 0.9 0" rotation="-70 180 180" src="./img/headerGenerosidad.png"></a-image>
                <a-image width="1" height="1" position="1 0 0" rotation="-70 180 180" src="./img/generosidad.png"></a-image>
              </a-marker> -->
              <a-entity camera></a-entity>
        </a-scene>
    <script src="markets.js"></script>
    <script >
      // import {markets} from './markets.js';
      console.log(markets)

      AFRAME.registerComponent('markers_start',{
        init:function(){
          console.log('CREANDO LOS MARKADORES ............');


          var sceneEl = document.querySelector('a-scene');
          //preset="hiro"
          for (let index = 0; index < markets.length; index++) {
            const element = markets[index];
            var markerEl = document.createElement('a-marker');
            markerEl.setAttribute('type','pattern');
            markerEl.setAttribute('url',`${markets[index].patt}`);
            markerEl.setAttribute('id',`${index}`);

            sceneEl.appendChild(markerEl);

            var boxEl = document.createElement('a-image');
            boxEl.setAttribute('id',`image-${index}`);
            boxEl.setAttribute('width','1');
            boxEl.setAttribute('height','1');
            boxEl.setAttribute('position','0 1 0');
            boxEl.setAttribute('rotation','-70 180 180');
            boxEl.setAttribute('src', `${markets[index].descriptionImage}`);
            markerEl.appendChild(boxEl);

            var boxEl2 = document.createElement('a-video');
            boxEl2.setAttribute('id',`video-${index}`);
            boxEl2.setAttribute('width','1');
            boxEl2.setAttribute('height','1');
            boxEl2.setAttribute('autoplay');
            boxEl2.setAttribute('loop','true');
            boxEl2.setAttribute('position','0 0 0');
            boxEl2.setAttribute('rotation','-70 180 180');
            boxEl2.setAttribute('src', `${markets[index].image}`);
            markerEl.appendChild(boxEl2);
          }


        }

      });
      // entityEl.getObject3D(`<a-marker type='pattern' url='pattern-marker.patt'>
      //                   <a-box position='0 0.5 0' material='color: blue;'></a-box>
      //               </a-marker>`);
      // let scena = document.getElementById('scena');
      // console.log(scena)
      // let cadena = ""
      // for (let i = 0; i < markets.length; i++){
      //   console.log("entra aqui")
      //   cadena += `<a-marker type='pattern' url='pattern-marker.patt'>
      //                   <a-box position='0 0.5 0' material='color: blue;'></a-box>
      //               </a-marker>`
      //   // document.getElementById("scena").innerHTML = content
      // }
      // cadena += `<a-entity camera></a-entity>`
      // document.getElementById("scena").innerHTML = cadena
    </script>

  </body>
</html>

